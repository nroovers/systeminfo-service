var P=Object.create;var f=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var C=Object.getOwnPropertyNames;var F=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty;var b=(e,o,t,p)=>{if(o&&typeof o=="object"||typeof o=="function")for(let n of C(o))!I.call(e,n)&&n!==t&&f(e,n,{get:()=>o[n],enumerable:!(p=_(o,n))||p.enumerable});return e};var i=(e,o,t)=>(t=e!=null?P(F(e)):{},b(o||!e||!e.__esModule?f(t,"default",{value:e,enumerable:!0}):t,e));var q=i(require("http"));var w=i(require("express")),N=i(require("cors")),S=i(require("morgan"));var d=i(require("dotenv"));d.default.config();var O={port:Number(process.env.PORT)||3001,nodeEnv:process.env.NODE_ENV||"development",apiPref:process.env.API_PREF||"api",apiVersion:process.env.API_VERSION||"v1"},s=O;var l=require("express");var r=i(require("systeminformation")),A=()=>r.default.cpu(),T=async()=>{if(s.nodeEnv==="production")return r.default.cpuCurrentSpeed();let e=await r.default.cpuCurrentSpeed();return e.avg=Math.round((Math.random()*50+0)*10)/10,e},V=async()=>{if(s.nodeEnv==="production")return r.default.cpuTemperature();let e=await r.default.cpuTemperature();return e.main=Math.round((Math.random()*20+60)*10)/10,e},j=()=>r.default.currentLoad(),$=()=>r.default.mem(),L=()=>r.default.osInfo(),M=()=>r.default.currentLoad(),H=()=>r.default.processes(),z=()=>r.default.diskLayout(),B=()=>r.default.fsSize(),D=()=>r.default.networkInterfaces(),K=()=>r.default.networkStats(),U=()=>r.default.wifiNetworks(),a={cpu:A,cpuSpeed:T,cpuTemp:V,cpuLoad:j,mem:$,os:L,load:M,processes:H,disk:z,fsSize:B,network:D,networkStats:K,wifi:U};var G=e=>Array.isArray(e)?e:e?[e]:Object.keys(a),g=async(e,o,t)=>{try{let n=G(e.query.flag);var p={};for(let m of n){if(typeof a[m]!="function")throw new Error("Invalid flag: "+m);p[m]=await a[m]()}o.json(p)}catch(n){return n.statusCode=400,t(n)}};var R=(0,l.Router)();R.get("/",g);var v=R;var h=i(require("express-mung")),J=(e,o,t)=>({data:e}),x=h.default.json(J);var c=class e extends Error{statusCode;constructor(o,t=500){super(o),Object.setPrototypeOf(this,e.prototype),this.name=this.constructor.name,this.statusCode=t}};var Q=(e,o,t)=>{let p=new c(`Page not found '${e.originalUrl}'`,404);t(p)},y=Q;var W=(e,o,t,p)=>{t.status(e.statusCode).json({error:{code:e.statusCode,message:e.message}})},E=W;var u=(0,w.default)(),X=`/${s.apiPref}/${s.apiVersion}`;u.use((0,N.default)());u.use((0,S.default)(':remote-addr - :remote-user [:date[clf]] ":method :url HTTP/:http-version" :status :res[content-length] :response-time ms'));u.use(x);u.use(X+"/info",v);u.get("/",function(e,o){o.send("<h2>OK</h2><p>System info service up and running.<p>")});u.use(y);u.use(E);var k=u;var Y=q.default.createServer(k);Y.listen(s.port,()=>{console.log(`Node_ENV: ${s.nodeEnv}`),console.log(`Server running on port ${s.port}`)});
//# sourceMappingURL=index.js.map
